<div class="grid">
  <div class="col-12">
    <div class="mx-2 py-2">
      <h4>
        <i class="bi bi-list-ol"></i>
        Ordenar ações do Sistema
      </h4>
    </div>
    <div class="card">
      <p-table
        #table
        dataKey="id"
        [value]="actionService.actions"
        [rows]="10"
        stateStorage="session"
        stateKey="ordernate-actions"
        [tableStyle]="{ 'min-width': '50rem' }"
        [styleClass]="'p-datatable-sm'"
      >
        <ng-template pTemplate="caption">
          <div class="flex justify-content-between">
            <div class="flex align-items-center" [style]="{ width: '50%' }">
              <span class="flex">
                Item
                <i
                  class="bi bi-info-circle mx-2"
                  role="button"
                  pTooltip="Selecione um item para carregar suas ações aninhadas e ordenar conforme sua vontade."
                  tooltipPosition="top"
                ></i>
              </span>
              <p-dropdown
                [options]="itemService.items"
                [filter]="true"
                name="drop"
                optionLabel="nome"
                optionValue="id"
                [(ngModel)]="idItem"
                (onChange)="actionService.loadActionsByItemId(idItem)"
                [style]="{ 'min-width': '30em' }"
              >
              </p-dropdown>

            </div>
            <p-button
              class="float-end"
              label="Salvar Ordenação Atual"
              tooltipPosition="top"
              icon="pi pi-save"
              iconPos="right"
              [text]="true"
              [rounded]="true"
              severity="success"
              (onClick)="actionService.saveOrdenation()"
            >
            </p-button>
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th style="width: 3rem">
              <i
                class="bi bi-info-circle"
                role="button"
                pTooltip="Utilize este grid para ordenar os itens conforme você deseja que os mesmos sejam mostrados na barra de navegação"
                tooltipPosition="top"
              ></i>
            </th>
            <th>Nome</th>
            <th>Vinculado ao item</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-action let-ri="rowIndex">
          <tr [pReorderableRow]="ri">
            <td>
              <span class="pi pi-bars" pReorderableRowHandle></span>
            </td>
            <td>{{ action.nome }}</td>
            <td>{{ action.item_pai }}</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
